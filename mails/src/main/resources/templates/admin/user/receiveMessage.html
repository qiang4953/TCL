<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <title>收件箱</title>
    <script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
</head>
<body>
    <table>
        <thead>
            <tr>
                <th><!--是否拆开图片 --> </th><th>主题</th><th>发件人</th><th>时间</th><th>内容</th>
            </tr>
        </thead>
        <tbody id="tab"></tbody>
    </table>
</body>

<script>
    $(document).ready(function(){
      $.ajax({
          url:"[[@{/message/receiveMessage}]]",
          dataType:"json",
          type:"POST",
          success:function (data) {
                var str ="";
              $("#tab").html(str);
              if(data.length>0){
                  //使用jquery形式遍历
                  var img = "1"; //邮件是否被拆开的图标标签的string
                  $.each(data,function(n,val){

                      //判断是否被拆开并给予不同的图片地址
                      //   if (val.receiveState==0){
                      //       var img = "<img src=''/>" //未查看
                      //   }else {
                      //       var img = "<img src=''/>" //已查看
                      //   }
                      str+="<tr>"+
                          "<td>"+img+"</td>"+"<td>"+val.title+"</td>"+"<td>"+val.sendMail+"</td>"+"<td>"+val.date+"</td>"+"<td><button onclick=''>查看内容</button></td>"+
                         "</tr>";

                  });
              }else{
                  $("#tab").append("<tr><td colspan=8 align=\"center\">暂时没有邮件</td></tr>");
              }
              $("#tab").append(str);
          },
          error:function () {
              alert("服务器错误")
          }
      })
    })
</script>
</html>